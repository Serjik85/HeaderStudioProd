#!/bin/bash

# Скрипт для настройки локального окружения проекта
# Устанавливает необходимые зависимости локально в проект

echo "Настройка локального окружения для WebStudio..."

# Проверяем наличие npm
if ! command -v npm &> /dev/null; then
  echo "ОШИБКА: npm не найден. Пожалуйста, установите Node.js и npm."
  exit 1
fi

# Устанавливаем необходимые зависимости локально
echo "Устанавливаем необходимые зависимости локально..."
npm install --save-dev ts-node typescript dotenv

# Создаем локальный скрипт для запуска приложения
echo "Создаем локальный скрипт для запуска приложения..."
cat > run_local.sh << 'EOF'
#!/bin/bash

# Запускаем приложение с использованием локально установленных модулей
echo "Запускаем приложение с локальными модулями..."
npx ts-node server/index.ts
EOF

chmod +x run_local.sh

echo "Настройка завершена!"
echo "Теперь вы можете запустить приложение локально с помощью команды:"
echo "./run_local.sh"
echo ""
echo "Или использовать PM2 с локальными модулями:"
echo "pm2 start \"npx ts-node server/index.ts\" --name \"webstudio\""
